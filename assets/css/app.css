/* Styles from your original HTML */
#map { position: absolute; top: 0; bottom: 0; right: 0; left: 0; }
.feature-row { cursor: pointer; }
.feature-row:hover { background-color: #f5f5f5; }

/* Styles required for Script 2's custom UI */
/* LAT/LONG must be adjusted higher now that the Layer Manager is above it */
#lat-lng-pane { 
    position: absolute; 
    bottom: 5px; 
    left: 5px; 
    background: rgba(255, 255, 255, 0.8); 
    padding: 5px; 
    z-index: 1000; 
    display: none; 
}

/* Custom Layer Box & Buttons (Needs styling to look like a proper GIS editor) */
#layerBox { padding: 10px; background: #fff; border-top: 1px solid #ddd; max-height: 200px; overflow-y: auto; }
.geojson-layer { display: flex; align-items: center; padding: 5px 0; border-bottom: 1px dotted #eee; }
.geojson-layer > input[type="checkbox"] { margin-right: 5px; }
.layer-btn { background: none; border: none; padding: 0 5px; cursor: pointer; color: #38f; }
.style-patch { cursor: pointer; margin-right: 5px; width: 22px; height: 22px; display: inline-block; }
.style-patch svg { width: 100%; height: 100%; }

/* Edit Pane Styling (Needs significant CSS, adding basics here) */
#edit-pane { position: absolute; top: 0; right: 0; width: 300px; height: 100%; background: white; z-index: 1001; box-shadow: -2px 0 5px rgba(0,0,0,0.2); display: none; padding: 15px; overflow-y: auto; }
#attribute-pane li { list-style: none; margin-bottom: 10px; }
#attribute-pane label { display: block; font-weight: bold; }
#attribute-pane input[type="text"] { width: 100%; padding: 5px; border: 1px solid #ccc; }
#close-edit-pane { float: right; }

/* --- CONTROL POSITIONING --- */

/* 1. CUSTOM LAYER MANAGER (Your Buttons/Layer List) -> BOTTOM-LEFT */
.custom-control-container {
    position: absolute; 
    /* Desktop Default Position: Top-Left (Original) */
    top: 10px; 
    left: 10px; 
    
    /* NEW: Override for Bottom-Left Positioning */
    top: auto; 
    bottom: 40px; /* Above lat/long pane and off the bottom edge */
    
    /* Standard styles */
    background: white; 
    z-index: 1000; 
    padding: 10px; 
    border-radius: 5px; 
    box-shadow: 0 1px 5px rgba(0,0,0,0.4);
}

/* 2. GEOMAN CONTROLS (PM Toolbar) -> TOP-LEFT (Default) */
/* 3. LEAFLET LAYER CONTROL -> TOP-RIGHT (Leaflet's default position) */

/* --- MOBILE LAYOUT REPAIR (Ensures no overlap and maintains corner rules) --- */
@media (max-width: 767px) {
    
    /* 1. Custom Layer Manager: Stays Bottom-Left, but ensure it's not too wide */
    .custom-control-container {
        left: 10px !important; 
        right: auto !important; 
        max-width: 90%; 
    }
    
    /* 2. Geoman Controls: Stays Top-Left (Leaflet's default placement for 'topleft' works fine) */
    /* 3. Leaflet Layer Control: Stays Top-Right (Leaflet's default placement for 'topright' works fine) */
    
    /* Hide Geoman Toolbar ONLY if the primary goal is zero visual overlap and you are not actively drawing */
    /* Based on your screenshot, this toolbar is still visible on the top-left on small screens. 
       If you want it to hide to avoid conflict with other controls, use this: */
    /*
    .leaflet-pm-toolbar {
        display: none !important; 
    }
    */
    
    /* If you want Geoman to be smaller on mobile: */
    .leaflet-pm-toolbar {
        transform: scale(0.85); /* Shrink the toolbar slightly */
        transform-origin: top left;
    }
}